/**
 * @fileoverview Dialog Contact Component Styles
 * @description Styles for the add/edit contact dialog modal, including layout,
 *              branding, form controls, avatar display, action buttons,
 *              and responsive behavior for mobile devices.
 * 
 * @section Dialog Layout
 * The dialog uses a 2:1 aspect ratio (width:height) achieved via:
 *   - width: 60vw, height: 30vw (viewport-relative units)
 * This ensures consistent proportions across different screen sizes.
 * 
 * @section z-index Hierarchy
 * The dialog overlay uses z-index: 3 to cover all application layers:
 *   - Header:              z-index: 1 (base navigation layer)
 *   - Sidebar:             z-index: 2 (above header on mobile)
 *   - Dialog Overlay:      z-index: 3 (covers entire viewport)
 *   - Dialog Close Button: z-index: 4 (clickable above overlay)
 *   - Mobile FAB Add:      z-index: 4 (floating action button)
 *   - Mobile FAB Actions:  z-index: 5 (actions menu trigger)
 *   - Mobile Actions Panel: z-index: 6 (slide-in action menu)
 *   - Mobile Back Button:  z-index: 7 (always accessible)
 * 
 * @section Overlay Transparency
 * The overlay uses rgba(0, 0, 0, 0.3) for a subtle darkening effect
 * that maintains visibility of the underlying content while focusing
 * user attention on the dialog.
 * 
 * @see header.scss - Header z-index: 1
 * @see sidebar.scss - Sidebar z-index: 2
 * @see contacts.scss - Mobile FAB z-index values (4-7)
 */

@use '../../styles/variables' as *;

/**
 * Dialog Contact Styles
 * Provides layout, branding, form controls, avatar, actions,
 * and responsive behavior for the add/edit contact dialog.
 */

/**
 * Root dialog container: flex row, rounded corners, white background.
 * Layout: 40% dark left panel, 60% white right panel
 * Dimensions: max-width 1200px, height 600px, min-width 760px
 * Aspect ratio 2:1 (width:height)
 */
.dialog {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  position: relative;
  width: 100%;
  max-width: 1200px;
  min-width: 760px;
  height: 600px;
  border-radius: 16px;
  overflow: hidden;
  background: #fff;
}

/**
 * Overlay centering: centers dialog within viewport.
 * Dark backdrop behind the dialog for focus.
 */
.dialog-overlay {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  z-index: 3;
  pointer-events: auto;
  background-color: rgba(0, 0, 0, 0.3);
}

/**
 * Slide-in animation wrapper: centered with fixed dimensions.
 * Uses max-width/height with 90% fallback for smaller screens.
 */
.dialog--animated {
  width: 90%;
  max-width: 1200px;
  height: 600px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.16);
  transform: translateX(72px);
  opacity: 0;
  animation: dialogSlideIn 480ms ease-out forwards;
}

@keyframes dialogSlideIn {
  from {
    transform: translateX(72px);
    opacity: 0;
  }

  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/**
 * Right content inner container: avatar + form with constrained width.
 */
.dialog__content {
  display: flex;
  align-items: center;
  gap: 24px;
  width: 100%;
  max-width: 560px;
}

.dialog__content .form {
  flex: 1;
  max-width: none;
  gap: 32px;
 right: 45.5px;
  margin-left: 5.5px;
}

.dialog--fullscreen {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  background: $color-brand-primary;
  color: #fff;
  border-radius: 0;
}

.dialog__header {
  position: absolute;
  top: 16px;
  left: 16px;
}

.dialog__logo {
  display: block;
  width: 53.9328px;
  height: 66.4829px;
  margin-bottom: 24px;
}

/**
 * Left brand panel: blue background, vertical brand content.
 */
.dialog__left {
  position: relative;
  background: $color-brand-primary;
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  padding: 24px 24px 24px 45.5px;
}

/**
 * Panel width distribution: 40% left (dark), 60% right (white)
 * This creates the visual balance shown in the design.
 */
.dialog__left {
  flex: 0 0 40%;
  min-width: 0;
}

.dialog__right {
  flex: 0 0 60%;
  min-width: 0;
}

.brand {
  max-width: none;
}

.logo {
  font-size: 32px;
  font-weight: 800;
  left: 45.5px
}

.title {
  font-weight: 700;
  font-style: normal;
  font-size: 61px;
  line-height: 120%;
  letter-spacing: 0;
  margin-top: 12px;
}

.title-underline {
  width: 90px;
  height: 3px;
  background: $color-brand-highlight;
  border-radius: 2px;
  margin-top: 12px;
}

.subtitle {
  margin-top: 8px;
  opacity: 0.9;
}

/**
 * Right panel: contains close button, avatar and form.
 */
.dialog__right {
  position: relative;
  padding: 0px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}

.close {
  position: absolute;
  top: 45.5px;
  right: 45.5px;
  border: none;
  background: transparent;
  font-size: 20px;
  z-index: 4;
  cursor: pointer;
}

/* Close icon variants (default: desktop visible) */
.icon-close {
  width: 13.5px;
  height: 13.5px;
  display: inline-block;
}

.icon-close--mobile {
  display: none;
}

/**
 * Avatar circle: initials or icon, elevated with shadow.
 * Uses aspect-ratio to maintain perfect circle on resize.
 */
.avatar {
  width: 120px;
  height: 120px;
  aspect-ratio: 1 / 1;
  flex-shrink: 0;
  border-radius: 50%;
  background: #e4e7ed;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  color: #2a3647;
  border: 4px solid #fff;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
}

/**
 * Form container and input controls: spacing, focus, and errors.
 */
.form {
  width: 100%;
  max-width: 360px;
  top: 137px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.form label {
  position: relative;
  display: block;
}

.field-inner {
  position: relative;
  display: block;
}

.form input {
  width: 100%;
  padding: 8px 16px;
  border: 1px solid #d1d1d1;
  border-radius: 10px;
  transition: border-color 120ms ease, box-shadow 120ms ease;
  caret-color: $color-brand-highlight;
  font-size: 20px;
}

.form input::placeholder {
  color: #9aa3af;
  opacity: 1;
}

.form label:focus-within input,
.form input:focus,
.form input:focus-visible,
.form input.ng-touched:focus,
.form input.ng-dirty:focus {
  outline: none !important;
  border-color: $color-brand-highlight !important;
  border-width: 1px !important;
  box-shadow: none !important;
}

.form input.ng-invalid.ng-touched {
  border-color: $color-error !important;
}

.form input.ng-invalid.ng-touched::placeholder {
  color: $color-error;
}

.error {
  display: block;
  margin-top: 6px;
  font-size: 12px;
  line-height: 1.3;
  color: $color-error;
}

.field-inner .field-icon {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  opacity: 0.7;
}

/**
 * Actions row: primary (save) and secondary (delete/cancel) buttons.
 */
.actions {
  display: flex;
  gap: 24px;
  justify-content: flex-start;
}

.btn {
  padding: 15px 24px;
  border-radius: 8px;
  border: 1px solid transparent;
  cursor: pointer;
}

.btn-secondary {
  background: #fff;
  border-color: $color-brand-deep;
  color: $color-brand-deep;
  font-weight: 400;
  font-size: 21px;
  line-height: 120%;
  letter-spacing: 0%;
}

.btn-primary {
  background: $color-brand-deep;
  color: #fff;
  font-weight: 400;
  font-size: 21px;
  line-height: 120%;
  letter-spacing: 0%;
}

/**
 * Hover states: brand highlight for save and delete accents.
 */
.btn-primary:hover {
  background: $color-brand-highlight;
}

.btn-secondary:hover {
  border-color: $color-brand-highlight;
  color: $color-brand-highlight;
}

/**
 * Responsive breakpoints for maintaining 40:60 ratio and 2:1 aspect ratio.
 * Structure stays horizontal until 768px, only sizes change.
 */

/* Standard Breakpoint: Tablet / Small Desktop (max-width: 1024px) */
/** 
 * @breakpoint 1024px - Tablet/Small Desktop
 * Adjusts font sizes, padding, and logo size to be slightly smaller than desktop.
 * Layout remains horizontal (2-column).
 */
@media (max-width: 1024px) {
  .dialog {
    min-width: 760px;
    height: 500px;
  }

  .dialog--animated {
    height: 500px;
  }

  .title {
    font-size: 36px;
    /* From 850px */
    margin-top: 8px;
    /* From 850px */
  }

  .subtitle {
    font-size: 14px;
    /* From 850px */
  }

  .avatar {
    width: 80px;
    /* From 850px */
    height: 80px;
    /* From 850px */
    font-size: 28px;
    /* From 850px */
  }

  .dialog__left {
    padding: 16px 16px 16px 24px;
    /* From 850px */
  }

  .dialog__logo {
    width: 40px;
    /* From 850px */
    height: 50px;
    /* From 850px */
    margin-bottom: 12px;
    /* From 850px */
  }

  .title-underline {
    width: 60px;
    /* From 850px */
    margin-top: 8px;
    /* From 850px */
  }

  .form input {
    padding: 10px 36px 10px 10px;
    /* From 850px */
  }

  .btn {
    padding: 8px 14px;
    /* From 850px */
    font-size: 14px;
    /* From 850px */
  }
}

/* Standard Breakpoint: Mobile Switch (max-width: 768px) */
/**
 * @breakpoint 768px - Mobile Layout Start
 * Switches dialog to vertical layout (floating modal).
 * - Width: calc(100vw - 32px) for full width with margins
 * - Height: calc(100vh - 180px) to fit between header and nav
 * - min-width: 300px (overrides desktop 760px constraint) to allow shrinking on small phones
 * - Hides the logo to save space
 * - Hides 'Cancel' button (User requirement)
 */
@media (max-width: 768px) {
  .dialog {
    flex-direction: column;
    /* Fit between header (~80px) and nav (~80px) with small side margins */
    width: calc(100vw - 32px);
    height: calc(100vh - 180px);
    /* 180px ensures it clears both securely */
    min-width: 300px;
    max-height: unset;
    border-radius: 30px;
  }

  .dialog__logo {
    display: none;
  }

  .dialog--animated {
    width: calc(100vw - 32px);
    height: calc(100vh - 180px);
    max-width: none;
  }

  .dialog__left {
    flex: 0 0 160px;
    /* Fixed height for header part */
    padding: 24px;
    justify-content: flex-start;
    padding-bottom: 40px;
    border-radius: 30px 30px 0 0;
  }

  .dialog__right {
    flex: 1;
    padding-top: 56px;
    padding-bottom: 24px;
    justify-content: flex-start;
    border-radius: 0 0 30px 30px;
    /* Important: Allow avatar to bleed upwards (no overflow hidden here) */
    overflow: visible;
    display: flex;
    flex-direction: column;
  }

  .title {
    font-size: 36px;
  }

  /* Hide Cancel button on mobile */
  .btn-secondary {
    display: none;
  }

  .actions {
    justify-content: center;
    padding-top: 12px;
  }

  .dialog__content {
    flex-direction: column;
    align-items: center;
    /* Content wrapper takes remaining space */
    flex: 1;
    display: flex;
    overflow: visible;
    width: 100%;
    min-height: 0;
    /* Enable flex scrolling */
  }

  .form {
    /* Form becomes the scrollable area */
    flex: 1;
    overflow-y: auto;
    width: 100%;
    /* Max-width handled by other rules, but ensure centered scroll */
    padding: 0 10px;
  }

  .close {
    color: #fff;
    z-index: 4;
    top: 24px;
    right: 24px;
  }

  /* Swap close icon to white on mobile */
  .icon-close--desktop { display: none; }
  .icon-close--mobile { display: inline-block; }

  .avatar {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100px;
    height: 100px;
    font-size: 32px;
  }

  .title {
    font-size: 32px;
  }
}

/* Standard Breakpoint: Small Mobile (max-width: 480px) */
/**
 * @breakpoint 480px - Small Mobile
 * Further reductions for very small screens (e.g. older iPhones).
 * - Reduces side padding
 * - Smaller font sizes for titles and buttons
 */
@media (max-width: 480px) {
  .form {
    padding: 0 4px;
    /* Slight padding for safety */
    gap: 10px;
  }

  .title {
    font-size: 28px;
  }

  .avatar {
    width: 80px;
    height: 80px;
    font-size: 24px;
  }

  .btn {
    padding: 8px 14px;
    font-size: 14px;
  }

  .form input {
    padding: 10px 36px 10px 10px;
  }
}

/**
 * Centering overrides: center right panel content.
 */
.dialog__right {
  justify-content: center;
}

.dialog__content {
  margin: 0 auto;
}